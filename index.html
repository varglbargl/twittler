<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="twitt.css" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
  </head>
  <body>
    <script>

      var date = new Date

      var stripe = "#D8D8BE"
      var oldTweets = 0;
      var viewingUser = false;

      function update(){
        var index = streams.home.length - 1 - oldTweets;

        while(index > 0){
          var tweet = streams.home[streams.home.length - 1 - index];
          $("#content").prepend("<div class=\"tweet\" align=\"left\" style=\"background-color:" + stripe + "\"><span class=\"timestamp\"><i>" + now(tweet.created_at) + "</i></span><h3>@" + tweet.user + "</h3><p>" + tweet.message + "</p></div>");
          index -= 1;
          oldTweets += 1;
          if(stripe == "#F4EEF0"){
            stripe = "#D8D8BE";
          } else {
            stripe = "#F4EEF0";
          }
        }
      }

      function submit(){
        // -- still working on this.
      }

      function viewUserTimeline(){
        // -- stil working on this.
      }

      function now(time){
        // -- Gets and formats date and time.
        var dateAndTime = time.toString().split(" ");
        // dateAndTime = [0 day, 1 month, 2 date, 3 year, 4 time, 5 time correction, (6 Time, 7 Zone, 8 Name)];
        var time = dateAndTime[4].split(":");
        if (time[0] > 12){
          time[0] = time[0] - 12;
          time = time.join(":") + (" pm");
        } else {
          time = time.join(":") + (" am");
        }

        return dateAndTime[1] + " " + dateAndTime[2] + " " + time;
      }

      $(document).ready(function(){

        update();

        $(".update").click(function(){
          update();
        });

        //window.setInterval(update, 300);
      });
    </script>
    <div class="main" align="left">
      <div class="title"><img src="res/logo.png">
      </div>
      <div id="header">
        <textarea class="twinput" rows="3" cols="50"></textarea>
        <div class="bluebox" style="width: 192px;float: right; margin: 6px; margin-right: 32px">
          <div align="center">
            <button class="submit">
              <h1><span class="green">SUB</span>MIT</h1>
            </button>
          </div>
        </div>
      </div>
      <div id="sidebar">
        <div class="bluebox">
          <div align="center">
            <button class="update">
              <h1><span class="green">UP</span>DATE</h1>
            </button>
          </div>
        </div>
        <div class="feathers">
        </div>
      </div>
      <div id="content">
      </div>
      <div class="branch">
        <img src="res/branch.png">
      </div>
    </div>
    <div align="center"><p>Color scheme taken from <a href="http://rozzers.deviantart.com/art/Colour-Scheme-Challenge-157874684">this</a>.</p><h1 style="margin-top:0px">. . .</h1></div>
  </body>
</html>
